<head>
  <title>@@FNAME@@, @@LNAME@@</title>
  <script>
    let changes = {};
    let url = "";
    function whenclicked() {
      url = window.location.protocol + "//" + window.location.host + '/@@FNAME@@ @@LNAME@@';
      var json = JSON.stringify(changes);
      sendJSON(url, json);
    }
    function addDate() {
        url = window.location.protocol + "//" + window.location.host + '/@@FNAME@@ @@LNAME@@';
        rad = [].slice.call(document.getElementsByClassName('form-radio'));
        selected_radio = rad.filter (r => r.checked == true ) [0];
        thedate = document.getElementById('thedate');
        let data = {};
        dt_yyyymmdd = thedate.value.replace(/-/g, '');
        data[dt_yyyymmdd] = selected_radio.value;
        var json = JSON.stringify(data);
        alert(json);
        sendJSON(url, json);
      }
    function radio_clicked(id, date, type) {
      radio = document.getElementById(type + "_" + id);
      changes[date] = type;
    }
    var handleFormSubmit = function handleFormSubmit(event) {
      // Stop the form from submitting since weâ€™re handling that with AJAX.
      event.preventDefault();
    };
    var sendJSON = function sendJSON(url, json) {
      xhttp = new XMLHttpRequest();

      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          alert("changes posted : " + this.responseText);
        }
      };
      xhttp.open("POST", url, true);
      xhttp.setRequestHeader("Content-Type", "application/json");
      xhttp.send(json);
    };
    var dateControl = document.querySelector('input[type="date"]');
    dateControl.value = new Date();
  </script>
  <style>
    /* Float four columns side by side */
    .column {
      float: left;
      width: 25%;
      padding: 0 10px;
    }

    /* Remove extra left and right margins, due to padding in columns */
    .row {
      margin: 0 -5px;
    }

    /* Clear floats after the columns */
    .row:after {
      content: "";
      display: table;
      clear: both;
    }

    /* Style the counter cards */
    .card {
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2); /* this adds the "card" effect */
      padding: 16px;
      text-align: center;
      background-color: #f1f1f1;
    }

    /* Responsive columns - one column layout (vertical) on small screens */
    @media screen and (max-width: 600px) {
      .column {
        width: 100%;
        display: block;
        margin-bottom: 20px;
      }
    }

    /* Heydon Pickeringâ€™s lobotomized owl. Details: https://bit.ly/1H7MXUD */
    * + * {
      margin-top: 16px;
      margin-top: 1rem;
    }

    /* Set up fonts, colors and all that jazz. */
    body {
      background: #f9fdfe;
      color: #686a69;
      font-family: "Open Sans", sans-serif;
      font-size: 18px;
      line-height: 1.75;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    /* Set up general layout rules for outer containers. */
    .content,
    .results {
      width: 90vw;
      max-width: 550px;
      margin: 8vh auto;
    }

    .content__heading {
      font-size: 125%;
    }

    .content__lede {
      margin-top: 8px;
      margin-top: 0.5rem;
      font-size: 87.5%;
    }
    .form {
      position: relative;
      display: block;
      margin: 0;
      padding: 16px 0 32px;
      padding: 1rem 0 2rem;
      border-top: 1px solid #cdcfcf;
      border-bottom: 1px solid #cdcfcf;
      overflow: hidden;
    }

    button {
      display: block;
      margin: 8px 16px 0;
      margin: 0.5rem 1rem 0;
      padding: 0 16px 2px;
      padding: 0 1rem 0.125rem;
      background-color: #686a69;
      border: 0;
      color: #f9fdfe;
      font-family: lato, sans-serif;
      font-size: 100%;
      letter-spacing: 0.05em;
      line-height: 1.5;
      text-transform: uppercase;
      transition: 150ms all linear;
    }
    .calendar {
      display: block;
      margin-top: 0;
      padding: 8px 12px;
      padding: 0.5rem 0.75rem;
      border: 1px solid #cdcfcf;
      width: 100%;
      font-family: "Open Sans", sans-serif;
      font-size: 16px;
      font-size: 1rem;
      transition: 150ms border-color linear;
    }
    .checkbox,
    .radio {
      display: inline-block;
      width: auto;
    }
    .checkbox ~ .checkbox,
    .radio ~ .radio {
      margin-left: 16px;
      margin-left: 1rem;
    }
    .input:focus,
    .input:active {
      border-color: #686a69;
      outline: 0;
    }
    .button:hover,
    .button:active,
    .button:focus {
      background: #2a2f2c;
      cursor: pointer;
      outline: 0;
    }
    table,
    th,
    td {
      border: 1px solid black;
    }
    /* Customize the label (the container) */
    .container {
      display: block;
      position: relative;
      padding-left: 35px;
      margin-bottom: 12px;
      cursor: pointer;
      font-size: 22px;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Hide the browser's default checkbox */
    .container input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
    }

    /* Create a custom checkbox */
    .checkmark {
      position: absolute;
      top: 0;
      left: 0;
      height: 25px;
      width: 25px;
      background-color: #eee;
    }

    /* On mouse-over, add a grey background color */
    .container:hover input ~ .checkmark {
      background-color: #ccc;
    }

    /* When the checkbox is checked, add a blue background */
    .container input:checked ~ .checkmark {
      background-color: #2196f3;
    }

    /* Create the checkmark/indicator (hidden when not checked) */
    .checkmark:after {
      content: "";
      position: absolute;
      display: none;
    }

    /* Show the checkmark when checked */
    .container input:checked ~ .checkmark:after {
      display: block;
    }

    /* Style the checkmark/indicator */
    .container .checkmark:after {
      left: 9px;
      top: 5px;
      width: 5px;
      height: 10px;
      border: solid white;
      border-width: 0 3px 3px 0;
      -webkit-transform: rotate(45deg);
      -ms-transform: rotate(45deg);
      transform: rotate(45deg);
    }
    /* Customize the label (the container) */
    .container {
      display: block;
      position: relative;
      padding-left: 35px;
      margin-bottom: 12px;
      cursor: pointer;
      font-size: 22px;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Hide the browser's default radio button */
    .container input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
    }

    /* Create a custom radio button */
    .checkmark {
      position: absolute;
      top: 0;
      left: 0;
      height: 25px;
      width: 25px;
      background-color: #eee;
      border-radius: 50%;
    }

    /* On mouse-over, add a grey background color */
    .container:hover input ~ .checkmark {
      background-color: #ccc;
    }

    /* When the radio button is checked, add a blue background */
    .container input:checked ~ .checkmark {
      background-color: #2196f3;
    }

    /* Create the indicator (the dot/circle - hidden when not checked) */
    .checkmark:after {
      content: "";
      position: absolute;
      display: none;
    }

    /* Show the indicator (dot/circle) when checked */
    .container input:checked ~ .checkmark:after {
      display: block;
    }

    /* Style the indicator (dot/circle) */
    .container .checkmark:after {
      top: 9px;
      left: 9px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: white;
    }
     table.center {
    margin-left:auto; 
    margin-right:auto;
  }
  </style>
</head>
<body>
    <section class="content">
        <h1 class="content__heading">@@FNAME@@ @@LNAME@@'s Days</h1>
        <p class="content__lede">Use this form to add calendar elements</p>
        <form class="form">
            <input class="calendar" id="thedate" name="thedate" type="date" />

            <div class="form-group">
                <input class="form-radio" id="day_type-workday" name="day_type" type="radio" value="onsite" />
                <label class="label" for="day_type-workday">Workday</label>
                <input class="form-radio" id="day_type-holiday" name="day_type" type="radio" value="holiday" />
                <label class="label" for="day_type-holiday">Holiday</label>
                <input class="form-radio" id="day_type-work-at-home" name="day_type" type="radio" value="athome" />
                <label class="label" for="day_type-work-at-home">Work-At-Home</label>
                <input class="form-radio" id="day_type-standby" name="day_type" type="radio" value="standby" />
                <label class="label" for="day_type-standby">Standby</label>
            </div>
        </form>
        <button onclick="addDate()">Add</button>
        <button onclick="whenclicked()">Update</button>

    </section>
    <div class="form-group">
        <table style="width:80%" class="center">
            <tr>
                <th>Date</th>
                <th>Type</th>
                <th>Stand-by</th>
            </tr>
            @@TABLE@@
        </table>
    </div>
</body>

</html>